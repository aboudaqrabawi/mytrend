{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _ = require(\"./\");\n\nvar _AdRequest = _interopRequireDefault(require(\"./AdRequest\"));\n\nvar _events = require(\"../../utils/events\");\n\nvar _native = require(\"../../utils/native\");\n\nvar _utils = require(\"../../utils\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar subscriptions = [];\n\nvar RewardedVideo = function () {\n  function RewardedVideo(admob, adUnit) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, RewardedVideo);\n\n    this._onRewardedVideoEvent = function (event) {\n      var eventType = \"rewarded_video:\" + _this.adUnit + \":\" + event.type;\n      var emitData = (0, _extends2.default)({}, event);\n\n      switch (event.type) {\n        case 'onAdLoaded':\n          _this.loaded = true;\n          break;\n\n        case 'onAdFailedToLoad':\n          emitData = (0, _utils.nativeToJSError)(event.payload.code, event.payload.message);\n          emitData.type = event.type;\n          break;\n\n        default:\n      }\n\n      _events.SharedEventEmitter.emit(eventType, emitData);\n\n      _events.SharedEventEmitter.emit(\"rewarded_video:\" + _this.adUnit + \":*\", emitData);\n    };\n\n    for (var i = 0, len = subscriptions.length; i < len; i++) {\n      subscriptions[i].remove();\n    }\n\n    subscriptions = [];\n    this._admob = admob;\n    this.adUnit = adUnit;\n    this.loaded = false;\n\n    _events.SharedEventEmitter.removeAllListeners(\"rewarded_video_\" + adUnit);\n\n    _events.SharedEventEmitter.addListener(\"rewarded_video_\" + adUnit, this._onRewardedVideoEvent);\n  }\n\n  (0, _createClass2.default)(RewardedVideo, [{\n    key: \"loadAd\",\n    value: function loadAd(request) {\n      var adRequest = request;\n\n      if (!adRequest || !Object.keys(adRequest)) {\n        adRequest = new _AdRequest.default().addTestDevice().build();\n      }\n\n      return (0, _native.getNativeModule)(this._admob).rewardedVideoLoadAd(this.adUnit, adRequest);\n    }\n  }, {\n    key: \"setCustomData\",\n    value: function setCustomData(customData) {\n      return (0, _native.getNativeModule)(this._admob).rewardedVideoSetCustomData(this.adUnit, customData);\n    }\n  }, {\n    key: \"isLoaded\",\n    value: function isLoaded() {\n      return this.loaded;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (this.loaded) {\n        (0, _native.getNativeModule)(this._admob).rewardedVideoShowAd(this.adUnit);\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventType, listenerCb) {\n      var types = _objectSpread(_objectSpread({}, _.statics.EventTypes), _.statics.RewardedVideoEventTypes);\n\n      if (!types[eventType]) {\n        console.warn(\"Invalid event type provided, must be one of: \" + Object.keys(types).join(', '));\n        return null;\n      }\n\n      var sub = _events.SharedEventEmitter.addListener(\"rewarded_video:\" + this.adUnit + \":\" + eventType, listenerCb);\n\n      subscriptions.push(sub);\n      return sub;\n    }\n  }]);\n  return RewardedVideo;\n}();\n\nexports.default = RewardedVideo;","map":{"version":3,"sources":["/Users/alheresh/trend-mobile/my-trend-new/node_modules/react-native-firebase/dist/modules/admob/RewardedVideo.js"],"names":["subscriptions","RewardedVideo","admob","adUnit","_onRewardedVideoEvent","event","eventType","type","emitData","loaded","payload","code","message","SharedEventEmitter","emit","i","len","length","remove","_admob","removeAllListeners","addListener","request","adRequest","Object","keys","AdRequest","addTestDevice","build","rewardedVideoLoadAd","customData","rewardedVideoSetCustomData","rewardedVideoShowAd","listenerCb","types","statics","EventTypes","RewardedVideoEventTypes","console","warn","join","sub","push"],"mappings":"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","sourcesContent":["import { statics } from './';\nimport AdRequest from './AdRequest';\nimport { SharedEventEmitter } from '../../utils/events';\nimport { getNativeModule } from '../../utils/native';\nimport { nativeToJSError } from '../../utils';\nlet subscriptions = [];\nexport default class RewardedVideo {\n  constructor(admob, adUnit) {\n    for (let i = 0, len = subscriptions.length; i < len; i++) {\n      subscriptions[i].remove();\n    }\n\n    subscriptions = [];\n    this._admob = admob;\n    this.adUnit = adUnit;\n    this.loaded = false;\n    SharedEventEmitter.removeAllListeners(`rewarded_video_${adUnit}`);\n    SharedEventEmitter.addListener(`rewarded_video_${adUnit}`, this._onRewardedVideoEvent);\n  }\n  /**\n   * Handle a JS emit event\n   * @param event\n   * @private\n   */\n\n\n  _onRewardedVideoEvent = event => {\n    const eventType = `rewarded_video:${this.adUnit}:${event.type}`;\n    let emitData = Object.assign({}, event);\n\n    switch (event.type) {\n      case 'onAdLoaded':\n        this.loaded = true;\n        break;\n\n      case 'onAdFailedToLoad':\n        emitData = nativeToJSError(event.payload.code, event.payload.message);\n        emitData.type = event.type;\n        break;\n\n      default:\n    }\n\n    SharedEventEmitter.emit(eventType, emitData);\n    SharedEventEmitter.emit(`rewarded_video:${this.adUnit}:*`, emitData);\n  };\n  /**\n   * Load an ad with an instance of AdRequest\n   * @param request\n   * @returns {*}\n   */\n\n  loadAd(request) {\n    let adRequest = request;\n\n    if (!adRequest || !Object.keys(adRequest)) {\n      adRequest = new AdRequest().addTestDevice().build();\n    }\n\n    return getNativeModule(this._admob).rewardedVideoLoadAd(this.adUnit, adRequest);\n  }\n  /**\n   * Set custom data\n   * @param customData\n   * @returns {*}\n   */\n\n\n  setCustomData(customData) {\n    return getNativeModule(this._admob).rewardedVideoSetCustomData(this.adUnit, customData);\n  }\n  /**\n   * Return a local instance of isLoaded\n   * @returns {boolean}\n   */\n\n\n  isLoaded() {\n    return this.loaded;\n  }\n  /**\n   * Show the advert - will only show if loaded\n   * @returns {*}\n   */\n\n\n  show() {\n    if (this.loaded) {\n      getNativeModule(this._admob).rewardedVideoShowAd(this.adUnit);\n    }\n  }\n  /**\n   * Listen to an Ad event\n   * @param eventType\n   * @param listenerCb\n   * @returns {null}\n   */\n\n\n  on(eventType, listenerCb) {\n    const types = { ...statics.EventTypes,\n      ...statics.RewardedVideoEventTypes\n    };\n\n    if (!types[eventType]) {\n      console.warn(`Invalid event type provided, must be one of: ${Object.keys(types).join(', ')}`);\n      return null;\n    }\n\n    const sub = SharedEventEmitter.addListener(`rewarded_video:${this.adUnit}:${eventType}`, listenerCb);\n    subscriptions.push(sub);\n    return sub;\n  }\n\n}"]},"metadata":{},"sourceType":"script"}